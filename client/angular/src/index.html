<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>public.ink</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <script src="/assets/quill/quill.min.js"></script>
  <link rel="stylesheet" href="/assets/quill/quill.snow.css"/>

  <style>
  body {
    font-family: Courier New, Courier, monospace;
  }
  flex-col-center-center {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  #loadingScreen {
    width: 100%;
    height: 30px;
    border-bottom: 1px solid black;
}
  </style>

</head>

<body>
  <flex-col-center-center style="display: none;">
    <div><a href="/">public.ink</a> <span id="wording" > is loading </span> <span id="timer"></span>ms</div>
  </flex-col-center-center>
  <app-root>
  </app-root>

  <!--<iframe id="iframe" ></iframe>-->
<script>
  // update timer 
    var update = true
    var pageLoadedMS = new Date().getTime()

    // make preview, time till loading
    /*var iFrame = document.getElementById('iframe')
    iFrame.setAttribute('src', 'http://localhost:8080/author/bukovski?format=html')
    iFrame.onload = function () {
      let iFrameLoadedTs = new Date().getTime()
      let iFramedLoadTimeMS = iFrameLoadedTs - pageLoadedMS
      console.log('iframe onload in', iFramedLoadTimeMS)
    }*/
    function updateTimer() {

      window.requestAnimationFrame(() => {
        let now = new Date().getTime()
        let passed = now - pageLoadedMS
        let el = document.getElementById('timer')
        el.innerText = passed
        if (update) {
          updateTimer()
        } else {
          let word = document.getElementById('wording').innerText = 'has loaded in'
        }
      })

    }
    // kick of update loop
    updateTimer()
    function stopTimer(timestamp) {
      update = false
    }
  </script>
</body>
</html>
